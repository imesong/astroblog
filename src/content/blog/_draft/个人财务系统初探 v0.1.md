---
title: Personal Financial System v0.1
author: imesong
pubDatetime: 2024-10-14
editDatetime: 2024-10-14
slug: Personal Financial System
featured: false
draft: true
tags:
  - draft
description: 记录探索家庭财务系统的过程
---

## 背景

2023 年记录过一篇有关记账的文章，[[学习使用-beancount-记账]]，当时也是系统的学习了 Beancount 的使用方法，了解了复式记账法的概念，坚持了三个月，最后放弃。现在想想，放弃的主要原因有三个

1. 消费的录入比较繁琐，尤其是手机端的录入。电脑上录入虽然有配置快捷键，但还是要手动录入，对一个程序员，重复的手动录入是不可接受的。但 Beancount 的插件生态太少，如果要做个性的定制插件，需要投入较大的二次开发成本。
2. 过于追求完美，对消费的细节录入占用了较多的精力，比如便利店买瓶可乐，门口买个煎饼果子，基本每笔消费都录入了。
3. 数据报表都是在 Web 端，实际查看和应用的次数并不多。相比之前使用 notion 记账，收益并不明显，投入成本却显著增加了很多。

总之，2023 年 12 月放弃了 Beancount 记账。但使用 Beancount 过程中，了解到的复式记账法，增加了我对记账的理解。这次尝试以 Notion 为中心，探索一套完善的个人财务系统 Personal Financial System(以下简称 PFS) 。

## PFS 定义

我们尝试给 PFS 下个定义，解决 PFS 是什么的问题。PFS 是 以Envelope Budget Methodology 为基准，以 Zero-Sum Budgeting 为原则，解决个人的财务管理的方案。这套系统能够解决什么问题呢？

我们希望这套系统可以解决两个问题，探索一个方向。具体来讲，这两个问题是

1. 解决当前记账不完整，支出不可控的问题
2. 解决当前财务规划不清晰，缺乏财务目标和危机预案的问题

希望探索的方向

- 家庭资产盘点及配置，探索家庭理财方案

---

其实，无论使用什么记账工具，采用何种理念，需要解决的就是这几个基本的问题。

- [ ] 支出管理：在收入相对单一并且没有开源可能性的情况下，支出管理是增加家庭财务总量最好的方案了吧。
- [ ] 资金记录：包括收入记录，支出记录，转账记录等，总之，如实的记录资金的流动，是记账和财务管理的基本要求。
- [ ] 投资管控：不乱投资，看到别人赚钱，控制住自己也能发财的奢望。
- [ ] 账号管理：谁还没有八九十几张卡，怎么管理这些账户，包括资金，账单等。
- [ ] 未来资金规划：上有老，下有小，未来花钱的地方数都数不完，没有合理的资金规划，财务危机近在眼前啊。
- [ ] 财务分析：有数据，有记录，简单的财务分析能力要有吧。时间维度，类目维度，预算维度等等。

## 家庭记账相关方的分析

这里以一个典型的六口之家为例，分析家庭财务记账过程中，涉及的相关方，不仅仅是人，任何和家庭财务相关的主体，都是我们分析的对象，比如房子，车子。房子每个月需要还房贷，需要我们支出现金；车子每年需要买保险，做保养，加油等，也是对现金的消耗。

![image.png](https://img.imesong.com/file/f034d6c90f48d495f0d48-b12666f2cc4643dfe8.png)

整理下来，如果把家庭的财产比作一个池子，其中的现金比作池子中的水，有些主体是向池子中注入水，而有些主体是向外放水。
通过上面的表格，可以看出，我们日常活动中，大部分都是放水的，可以稳定增加池子中水的只有工资收入。当前及未来 money out 的方向，也是我们要做支出管理的类目。

## Account 管理

家里甭管有多少钱，这些钱都回在一个具体的账户上，可能是银行卡，可能是支付宝，或者是虚拟币等。
每一个账号，都是单独可以操作的资金的主体。账号需要详细的记录资金的流动，无论是在系统内流动，还是系统外流动。

- 入金：可以往里面转钱
- 出金：可以往外转钱
- 有数值：有记录资金数额

系统内流动：账号之间的资金流转，A 账号 → B 账号

系统外流动：外部资金 → A 账号。系统可以为外部资金建立一个虚拟账号，这样资金记录的数据结构就一致了。

**账户举例**

| 账户       | 类型     | 标签                     |
| ---------- | -------- | ------------------------ |
| 招行储蓄卡 | 储蓄卡   | 工资卡                   |
| 招行信用卡 | 信用卡   | 日常消费                 |
| 支付宝     | 电子钱包 | 日常消费                 |
| 长桥证券   | 投资     | 股票，基金               |
| 期权       | 投资     | 可回购                   |
| 人情账     | 现金     | 已经借出的现金；         |
| 中国银行   | 储蓄卡   | 储蓄账户                 |
| 负债账户   | 房贷     | 长期支出，体现本金和利息 |

账户里还有几个比较特殊的，下面我们逐一分析下这几个特殊的账号怎么处理

- 房贷
- 人情账户
- 投资账户
- 虚拟电子账户

### 房贷

家庭有房贷时，每个月需要向银行归还本金和利息。如果最近不准备卖房，对房子的估值也不会太关注，在这种情况下，房子对家庭来说，就是一个负债，每个月会稳定的消耗家庭的现金流。比如每个月从 A 账户转入到房贷账户，银行再把钱划走，这样这比钱就从我们系统内流转到系统外。怎么标记银行的这个扣钱记录呢。参考复式记账法，我们给这个房贷建立一个虚拟账户，这样我们就可以把这个记录变成我们系统内的一个记录。

### 人情账户

人在江湖，总少不了吃吃喝喝。有时候，从朋友那里借了一笔钱，用了十年半载，然后在还回去。有时候，发小结婚，随礼小几万，将来能不能还不打紧。
这里涉及到几个问题。外部的收款人，借款人不唯一，不确定，如果每个人都建立一个账户，会把系统复杂化。第二，有的资金往来需要归还，有的则不需要归还。
这个情况下，我们建立一个社交账户，记录借出的钱，以及从别人那里借入的钱。当我们从朋友那里借钱时，这里的余额为负，其他的银行卡账户收到一笔入账。当我们借给朋友钱时，这里的余额为正，银行卡记录一笔支出。

### 投资账户

话说，人无股不富，这年头，谁还没一点股票啊。投资账户，记录在投资市场的资金，重点是初期投入的本金。投资市场包括 股票、基金、期权等。不包括定期存款和长期储蓄。
投资账户的价值波动，不反应在我们的记账系统中。比如我买的股票，上涨了 15 个点，但我没有卖出，还是账面的波动，这个对家庭的现金流是没有太大影响的。如果我在上涨 20 个点时卖出，把股票变成了可以流动的资金，那投资账户的金额会增加。如果股票亏了 30 个点，但我一直不割肉，这时投资账户的资金还是在股票下跌时的金额，不会变化。

之所以这样处理投资账户，是为了简化我们系统中关于投资及资产部分的管理，我们的重点是支持和预算管理，而投资管理中资产价值波动，投资策略等，我们都会简化为一个数字。

### 支付宝

支付宝和微信支付，是一个支付平台，本身也有信用卡和储蓄卡的功能。这个看个人习惯，如果开通了花呗，就相当是在使用信用卡。如果只是使用余额宝和现金，相当于是一个普通的储蓄卡。我们在系统中会创建一个支付宝的虚拟账号，这样支付宝上的钱，也在我们这个系统的管控之中。

以 Account 为中心的财务系统，可以很方便的分析现金流，资产总量等。系统中的资金流动，都是要和账号相关的。

账号资金的增加：收入
账号资金的减少：消费
账号间资金的转移：转账

以此延伸出我们重要的三张数据表

- Income
- Expense
- Transfer

## 收入

在 [家庭记账相关方分析时](#家庭记账相关方的分析)， 我们就可以看到，普通家庭收入来源比较单一，其实没有特别的开源手段和方法，搞不好，还会把主要收入来源给干废了。

但收入数据表在我们的 PFS 中比较重要，预算的管理锚点之一，就是我们的收入及对收入的预测。我们的预算管理原则之一，就是给每一块钱都要找到它的归宿。所以这张表，也会关联到我们的预算表以及信封表。

收入分配时，有个多对多的关系，一笔收入，可以分配给多个预算项；每个预算项，可能是多个收入记录都会分配。Notion Database 原本不支持多对多的分配关系，为了解决这个问题，我们创建一个分配记录表中转，解决多对多的问题。

### Arch

![[arch-for-financial 2024-10-14 17.52.42.excalidraw]]

### Overview

![[home for financial page 2024-10-15 13.38.11.excalidraw]]

## User Case

## Schedule

---

关注公众号 **技术后花园** 获取更多信息

![image.png](https://img.imesong.com/file/9e0dc4dc2d2acd363d535.png)
